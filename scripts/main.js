(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(b=70,j=30,e=30,a=60,window.stacks=h=[],p=d3.range(1,7),l=0,n=p.length;n>l;l++)i=p[l],h.push({totes:i,bins:0,litter:0,score:2*i+0+0}),h.push({totes:i,bins:1,litter:0,score:2*i+4*i+0}),h.push({totes:i,bins:1,litter:1,score:2*i+4*i+6});for(m=0,o=h.length;o>m;m++)c=h[m],c.ratio=c.score/(c.totes+c.bins+c.litter);k=1e3/h.length,g=d3.scale.ordinal().domain(h.map(function(a){return a.score}).sort(function(a,b){return a-b})).rangePoints([0,900]),d=d3.scale.linear().domain([0,h.length]).range([0,900]),f=d3.scale.ordinal().domain(h.map(function(a){return a.ratio}).sort(function(a,b){return a-b})).rangePoints([0,900]),h=d3.select("svg").selectAll(".stack").data(h).enter().append("g").attr("score",function(a){return a.score}).attr("transform",function(a,b){return"translate("+d(b)+",300)"}),h.selectAll(".tote").data(function(a){return d3.range(0,a.totes)}).enter().append("use").attr("y",function(a,b){return(b+1)*-j}).attr("xlink:href","#tote"),h.selectAll(".litter").data(function(a){return d3.range(0,a.litter)}).enter().append("use").attr("y",function(){return(d3.select(this.parentElement).datum().totes+1)*-j-.55*b}).attr("xlink:href","#litter"),h.selectAll(".bin").data(function(a){return d3.range(0,a.bins)}).enter().append("use").attr("y",function(){return(d3.select(this.parentElement).datum().totes+1)*-j}).attr("xlink:href","#bin"),h.append("text").text(function(a){return a.score}).attr("x",k/2),window.orderByScore=function(){return d3.selectAll("g").transition().duration(a).delay(function(b,c){return a*c}).attr("transform",function(a){return"translate("+(g(a.score)+45*a.bins+45*a.litter)+",300)"})},window.orderByIndex=function(){return d3.selectAll("g").transition().duration(a).delay(function(b,c){return a*c}).attr("transform",function(a,b){return"translate("+d(b)+",300)"})},window.orderByRatio=function(){return d3.selectAll("g").transition().duration(a).delay(function(b,c){return a*c}).attr("transform",function(a){return"translate("+(f(a.score/(a.totes+a.bins+a.litter))+45*a.bins+45*a.litter)+",300)"})}}).call(this);